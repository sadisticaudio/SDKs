<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AAX SDK: Getting Started with AAX</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="aaxdoxy.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="cw_105x65_aax_buf.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AAX SDK
   &#160;<span id="projectnumber">2.3.2</span>
   </div>
   <div id="projectbrief">Avid Audio Extensions Development Kit</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Getting Started with AAX<div class="ingroups"><a class="el" href="a00793.html">AAX SDK Manual</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<p>A brief introduction to AAX. </p>
<h1><a class="anchor" id="aax_getting_started_guide_contents"></a>
Contents</h1>
<ul>
<li><a class="el" href="a00794.html#aax_sdk_guide_00_introduction">Welcome</a> </li>
<li><a class="el" href="a00794.html#aax_sdk_guide_quickstart">Quick Start</a> </li>
<li><a class="el" href="a00794.html#aax_sdk_guide_01_aax_design_overview">AAX Design Overview</a> </li>
<li><a class="el" href="a00794.html#aax_sdk_guide_02_demogain_example">DemoGain Example</a> </li>
<li><a class="el" href="a00794.html#aax_sdk_guide_next_steps">Next Steps</a></li>
</ul>
<div class="section"> </div><h1><a class="anchor" id="aax_sdk_guide_00_introduction"></a>
Welcome</h1>
<div class="section"> Welcome to AAX! This guide is designed to introduce you to the fundamental concepts of AAX. By the end of this guide you will understand: <ul>
<li>The purpose of AAX </li>
<li>The basic components of an AAX plug-in </li>
<li>The structure of the DemoGain example plug-in </li>
<li>What you need to do to successfully build and run your own AAX plug-ins</li>
</ul>
</div><div class="section"> </div><h1><a class="anchor" id="aax_sdk_guide_quickstart"></a>
Quick Start</h1>
<div class="section"> Use the steps below to get up and running quickly with an example plug-in from the AAX SDK.</div><div class="section"> <ul class="paragraphs">
<li>
<div class="SectionHead"> Build the AAX Library </div> <p class="interli">If this is your first time opening the AAX SDK then your first step should be to build the AAX Library project. The AAX Library is a static library containing default implementations of the AAX interface and convenience classes designed to make AAX development easy. All of the SDK example plug-ins link to this library, and your plug-ins should too. </p>
<p class="interli"></p>
<p class="interli">Open the AAX Library project for your chosen IDE from the Libs/AAXLibrary directory and build the library. Now you are ready to build plug-ins! </p>
<p class="endli"></p>
</li>
<li>
<div class="SectionHead"> Open and build the DemoGain example plug-in </div> <p class="interli">The DemoGain project is located in ExamplePlugIns/DemoGain. Once you have built the AAX Library project you will be able to successfully build DemoGain. To learn more about the DemoGain example plug-in, see the <a class="el" href="a00794.html#aax_sdk_guide_02_demogain_example">DemoGain Example</a> section below. </p>
<p class="endli"></p>
</li>
<li>
<div class="SectionHead"> Install a developer build of Pro Tools </div> <p class="interli">If you looking at AAX then you are most likely interested in developing plug-ins for <a class="el" href="a00830.html">Pro Tools</a>. Publicly available builds of Pro Tools require that AAX plug-ins be digitally signed. During development, you can use a "developer build" of Pro Tools to run unsigned test builds of your plug-ins, like the DemoGain plug-in that you just built. </p>
<p class="interli"></p>
<p class="interli">Download and install the latest Pro Tools developer build from the AAX developer downloads in your <a href="https://my.avid.com/account">my.avid.com</a> account. </p>
<p class="endli"></p>
</li>
<li>
<div class="SectionHead"> Obtain a Pro Tools Developer iLok license (and an iLok) </div> <p class="interli">Pro Tools developer builds require a special license loaded on an iLok USB device. You can request this Pro Tools Developer license, as well as any other NFR (Not For Resale) licenses which you require for your AAX product development and testing, by writing to <a href="#" onclick="location.href='mai'+'lto:'+'dev'+'au'+'th@'+'av'+'id.'+'co'+'m?s'+'ub'+'jec'+'t='+'Lic'+'en'+'se '+'Re'+'que'+'st'; return false;">devauth@avid.com</a> with "License Request" in the subject. </p>
<p class="interli"></p>
<p class="interli">If you don't have an iLok device you will also need to obtain one from <a href="https://www.ilok.com">PACE Anti-Piracy Inc.</a> or a reseller, including most music shops which sell audio software. </p>
<p class="endli"></p>
</li>
<li>
<div class="SectionHead"> Install DemoGain in the AAX Plug-Ins folder </div> <p class="interli">In order to be loaded into Pro Tools, a plug-in must be present in the system's AAX Plug-Ins directory. See <a class="el" href="a00830.html#subsection__install_directories_">Install directories</a> in the <a class="el" href="a00830.html">Pro Tools Guide</a> document for more information about where to install AAX plug-ins for Pro Tools. </p>
<p class="endli"></p>
</li>
<li>
<div class="SectionHead"> Launch Pro Tools and run DemoGain </div> <p class="interli">You're now ready to run your very first AAX plug-in! </p><ol>
<li>
Make sure that your iLok USB device is connected to the system and contains the Pro Tools Developer license, then launch the Pro Tools developer build.  </li>
<li>
Once Pro Tools has launched, you will be prompted to create a new Session or Project. Choose Session (Local Storage) to create a local session file.  </li>
<li>
Create a new mono audio track in your session using the "New Track..." menu item  </li>
<li>
If it is not already visible, reveal the "Inserts A-E" view in the Edit window using the View &gt; Edit Window menu.  </li>
<li>
Click on one of the insert slots for your audio track and choose DemoGain from the insert selection menu.  </li>
</ol>
<p class="interli"></p>
<p class="interli">You're now running an instance of the DemoGain AAX plug-in. If you have a debugger attached to Pro Tools you should now be able to break in the plug-in's methods and step through its code. </p>
<p class="endli"></p>
</li>
<li>
<div class="SectionHead"> Get ready to release your own products </div> <p class="interli">Once you have created your own AAX plug-in you can follow the steps in <a class="el" href="a00843.html">Distributing Your AAX Plug-In</a> to prepare your plug-in for public sale and distribution. </p>
<p class="interli"></p>
<p class="interli">In particular, for Pro Tools compatibility or to test your product with a public Pro Tools release you will need to digitally sign your plug-in using a toolkit from PACE Anti-Piracy Inc. See the <a class="el" href="a00830.html#subsection__digital_signature_">digital signature</a> section of the <a class="el" href="a00830.html">Pro Tools Guide</a> for more information about this requirement. </p>
<p class="endli"></p>
</li>
</ul>
</div><div class="section"></div><div class="section"> </div><h1><a class="anchor" id="aax_sdk_guide_01_aax_design_overview"></a>
AAX Design Overview</h1>
<div class="section"></div><h2><a class="anchor" id="subsection__architecture_philosophy"></a>
Architecture Philosophy</h2>
<div class="section">The purpose of the AAX architecture is to provide an <em class="Italic">easy-to-use</em> framework for the development of <em class="Italic">high-performance audio plug-ins</em> that can run on a <em class="Italic">variety of platforms</em>, both present and future, with a <em class="Italic">high level of code re-use</em>.</div><div class="section"></div><h2><a class="anchor" id="subsection__design_attributes"></a>
Design Attributes</h2>
<div class="section">AAX incorporates a flexible, decoupled component hierarchy, including: <ol>
<li class="List">
A relocatable C-style callback that performs the plug-in's real-time audio processing algorithm  </li>
<li class="List">
A collection of supporting C++ objects that manage the plug-in's data, GUI, and any other non-real-time information  </li>
<li class="List">
A "description" method that statically describes the plug-in's layout and compatibility requirements to the host.  </li>
</ol>
</div><div class="section">This flexible design facilitates optimal performance and portability; AAX is 64-bit ready and is designed to work well in both host-based (Native), accelerated (DSP), and future (e.g. embedded) environments. Importantly, plug-ins running in each of these environments can use the same code base, and porting to new platforms should not require much more than a re-compile. To satisfy these portability requirements, AAX must be decoupled into three parts, the GUI, data model, and algorithm.</div><div class="section"></div><h2><a class="anchor" id="subsection__component_structure"></a>
Component Structure</h2>
<div class="section">The core component structure of an AAX plug-in involves data model, GUI, description, and algorithm modules. The design involves a mixture of C++ objects (data model and GUI modules) and C-style callbacks (algorithm and description modules.)</div><div class="section">Figure shows basic object ownership and composition in an AAX plug-in. The purple components are provided as part of the AAX SDK while the gray components are written as needed by the plug-in developer. The classes above the dotted line are pure virtual interfaces, while the classes below the dotted line are concrete implementations.</div><div class="section"><img src="AAX_Design_Overview_ActualAAXInterface.png" width="50%" alt="Core AAX interface design" class="inline"/>
 <div class="imagecaption"> Figure 1: Core AAX interface design.</div></div><div class="section">As you can see, the plug-in's <a class="el" href="a00798.html">data model</a> and <a class="el" href="a00799.html">GUI</a> are written as C++ objects inherited from SDK interfaces, while its <a class="el" href="a00797.html">algorithm</a> and <a class="el" href="a00796.html">Description</a> methods are implemented as simple callbacks. This basic model may be expanded by attaching additional modules, such as the <a class="el" href="a00804.html">Host Processor</a> module used by advanced non-real-time plug-ins. In this section, however, we will be considering only the four core interfaces and modules.</div><div class="section"></div><h2><a class="anchor" id="subsection__algorithm"></a>
Algorithm</h2>
<div class="section">The most fundamental, and most important, component of any audio plug-in is its processing algorithm. Due to the design requirements of an AAX plug-in, this component must meet several constraints in order to be compatible with accelerated platforms: <ol>
<li class="List">
It must be possible to build the algorithm as a compatible component on a variety of platforms  </li>
<li class="List">
It must be possible for the host to re-locate the algorithm in memory without affecting the algorithm's state  </li>
<li class="List">
The algorithm must be separable from the rest of its plug-in, e.g. into a different memory space  </li>
<li class="List">
The algorithm must be as efficient as possible to call.  </li>
</ol>
</div><div class="section">To satisfy these constraints, AAX uses a decoupled C-style callback function. State information within the function is obtained through the context, a custom data structure that contains everything from the "outside world" that is relevant to the algorithm. The context includes information such as audio buffers and coefficient packets, which are provided according to a static set of data routing definitions that we will describe further in the next chapter. The host is responsible for ensuring that this structure is up-to-date whenever the algorithm callback is entered.</div><div class="section"><dl class="section see"><dt>See also</dt><dd><a class="el" href="a00797.html">Real-time algorithm callback</a></dd></dl>
</div><h2><a class="anchor" id="subsection__data_model"></a>
Data Model</h2>
<div class="section">The <a class="el" href="a01825.html">AAX_IEffectParameters</a> interface represents the data model portion of your plug-in. The AAX host interacts with your plug-in's data model via this interface, which includes methods that store and update of your plug-in's internal data.</div><div class="section">In your plug-in's data model implementation, you will be responsible for creating the plug-in's parameters and defining how the plug-in will respond when these parameters are changed via control updates or preset loads. In order for information to be routed from the data model to the plug-in's algorithm, the parameters that are created here must be registered with the host in the plug-in's Description callback (see below).</div><div class="section">The data model is composed with <a class="el" href="a01789.html">AAX_IController</a>, an interface that provides access to the host. This interface provides a means of querying information from the host such as stem format or sample rate, and is also responsible for communication between the data model and the (decoupled) algorithm.</div><div class="section">You will most likely inherit your custom data model's implementation from <a class="el" href="a01481.html">AAX_CEffectParameters</a>, a default implementation of the <a class="el" href="a01825.html">AAX_IEffectParameters</a> interface. This class provides basic functionality such as adding custom parameters, setting control values, restoring state, generating coefficients, etc., which you can override and customize as needed.</div><div class="section"> <dl class="section see"><dt>See also</dt><dd><a class="el" href="a00798.html">Data model interface</a></dd></dl>
</div><h2><a class="anchor" id="subsection__gui_interface"></a>
GUI Interface</h2>
<div class="section">The <a class="el" href="a01821.html">AAX_IEffectGUI</a> interface contains the plug-in's GUI methods. This interface is decoupled from the plug-in's data model, allowing AAX to support distributed architectures that incorporate remote GUIs.</div><div class="section">The GUI is also composed with <a class="el" href="a01789.html">AAX_IController</a>, from which references to the plug-in's other components, such as its data model interface, may be retrieved.</div><div class="section">The AAX SDK includes a set of GUI extensions to help you get started implementing your plug-ins' GUIs. These extensions include both native drawing formats and suggested integrations with third-party graphics frameworks. Although the SDK does not include any actual graphics frameworks, these extensions provide examples of how you can incorporate your chosen GUI framework with <a class="el" href="a00852.html">AAX</a>.</div><div class="section"> <dl class="section see"><dt>See also</dt><dd><a class="el" href="a00799.html">GUI interface</a></dd></dl>
</div><h2><a class="anchor" id="subsection__describe"></a>
Describe</h2>
<div class="section">A plug-in's Describe callback ties all the plug-in's components together and registers the plug-in with the host. In this callback, your plug-in defines a set of algorithm callbacks, data connections, and static plug-in properties</div><div class="section">In order to route data to the plug-in's algorithm, Describe includes a description of the algorithm's context structure. This description involves a set of port definitions, which can be "hard-wired" to receive data from the host (such as audio buffers,) from the plug-in's data model (such as packets of coefficients,) or even from past calls to the algorithm (private, persistent algorithm state.)</div><div class="section">Once these connections are made, Describe passes the host a populated description interface and returns. In the next section we will demonstrate how all these interfaces interact with one another by examining a sample plug-in.</div><div class="section"><dl class="section see"><dt>See also</dt><dd><a class="el" href="a00796.html">Description callback</a></dd></dl>
</div><h2><a class="anchor" id="subsection__controller"></a>
Controller</h2>
<div class="section">There is one additional core component to any AAX plug-in, the Controller. The plug-in does not implement this component - rather, the Controller is an interface that provides access to various facilities provided by the host, as well as to the plug-in's other modules. </div><div class="section"> </div><h1><a class="anchor" id="aax_sdk_guide_02_demogain_example"></a>
DemoGain Example</h1>
<div class="section">The AAX SDK includes a basic example plug-in named DemoGain. In this section we will examine this plug-in to show how the various core modules in an AAX plug-in interact with one another. We will focus in particular on how the DemoGain's "gain" parameter is defined, routed to the algorithm, and used to apply a gain effect to audio samples. In this way we will "visit" each of the core components in DemoGain.</div><div class="section"> For a description of all the example plug-ins included in the SDK, see the <a class="el" href="a00848.html">Example Plug-Ins</a> page.</div><div class="section"> <dl class="section note"><dt>Note</dt><dd>To run DemoGain or other example plug-ins in Pro Tools 10 you must change the <code>AAX_ePlugInCategory_Example</code> category to <code>AAX_ePlugInCategory_Dynamics</code> in the plug-in's Describe function. The "example" category is not supported in Pro Tools 10.</dd></dl>
</div><h2><a class="anchor" id="subsection__overview_of_parameter_creation"></a>
AAX Plug-In Parameters</h2>
<div class="section"> A good starting point for understanding a plug-in is to understand its parameters. In DemoGain, as in most AAX plug-ins, the plug-in's parameters define its data model state and the plug-in's parameters provide the fundamental connection between user interactions and audio processing.</div><div class="section">The sections below will guide you through each of the main steps of parameter creation and connection, making use of the default implementation in <em class="Italic"><a class="el" href="a01481.html" title="Default implementation of the AAX_IEffectParameters interface.">AAX_CEffectParameters</a></em>: <ol>
<li class="List">
<a class="el" href="a00794.html#subsection__data_model_create_your_parameter">Data Model: Create Your Parameter</a> <ol>
<li class="AlphaList1st">
Create a new parameter object  </li>
<li class="AlphaList">
Register the parameter with the Packet Dispatcher  </li>
<li class="AlphaList">
Create an update callback that converts the raw parameter value into a packet of processed coefficients  </li>
</ol>
</li>
<li class="List">
<a class="el" href="a00794.html#subsection__algorithm_add_coefficients_to_the_algorithms_context_structure">Algorithm: Add coefficients to the algorithm's context structure</a> <ol>
<li class="AlphaList1st">
Create a new field for incoming coefficient packets  </li>
<li class="AlphaList">
Generate a <em class="Italic">field ID</em> to reference the new member  </li>
<li class="AlphaList">
Add the new coefficient to the plug-in's algorithm code  </li>
</ol>
</li>
<li class="List">
<a class="el" href="a00794.html#subsection__describe_connect_the_parameter_throughout_the_plugin">Describe: Connect the parameter throughout the plug-in</a> <ol>
<li class="AlphaList1st">
Add a new Data Input Port to the algorithm via the component descriptor interface  </li>
<li class="AlphaList">
Add a connection between the parameter's <em class="Italic">packet ID</em> and its coefficients' <em class="Italic">field ID</em> </li>
</ol>
</li>
<li class="List">
<a class="el" href="a00794.html#subsection__gui_add_a_control">GUI: Add a control</a> <ol>
<li class="AlphaList1st">
Create a GUI widget that can update the parameter's state  </li>
<li class="AlphaList">
Add logic to notify the data model when the GUI is edited  </li>
<li class="AlphaList">
Add logic to update the GUI when the data model state changes  </li>
</ol>
</li>
</ol>
</div><div class="section"></div><h2><a class="anchor" id="subsection__data_model_create_your_parameter"></a>
Data Model: Create Your Parameter</h2>
<div class="section">DemoGain's data model inherits its functionality from <a class="el" href="a01481.html">AAX_CEffectParameters</a> (the default implementation of <a class="el" href="a01825.html">AAX_IEffectParameters</a>). The <code>DemoGain_Parameters.h</code> and <code>DemoGain_Parameters.cpp</code> source files comprise the source code for DemoGain's data model.</div><div class="section">During plug-in initialization, <code>DemoGain_Parameters::EffectInit()</code> creates the plug-in's custom parameters. A look inside of the .cpp file shows how this is done via the creation of a new <a class="el" href="a01537.html">AAX_CParameter</a> for the gainParameter: the <a class="el" href="a01537.html">AAX_CParameter</a> constructor is parametrized with a set of arguments that define the gain parameter's behavior, such as its default value (<code>1.0f</code>), name ("Gain"), taper behavior (linear), etc.</div><div class="section">After creating the parameter objects, a series of packets are registered with the host via the inherited <a class="el" href="a01529.html">Packet Dispatcher</a>, <code>mPacketDispatcher</code>, which is a helper object used by <a class="el" href="a01481.html">AAX_CEffectParameters</a> to assist with the plug-in's packet management tasks.</div><div class="section"><div class="fragment"><div class="line">mPacketDispatcher.RegisterPacket(</div><div class="line">    DemoGain_GainID,</div><div class="line">    eAlgPortID_CoefsGainIn,</div><div class="line">    <span class="keyword">this</span>,</div><div class="line">    &amp;DemoGain_Parameters::UpdatePacket_Gain); </div></div><!-- fragment --> <div class="fragmentcaption"> Listing 1: Registration of DemoGain's "gain" packet handler</div></div><div class="section">The last parameter in <a class="el" href="a01529.html#a1848f0bfa473b54e9ee8e32872c89cb1">AAX_CPacketDispatcher::RegisterPacket()</a> takes a reference to a packet handler callback. This method will be called by the Packet Dispatcher whenever new parameter values need to be converted into coefficients that can be used by the algorithm. In DemoGain, a reference to DemoGain_Parameters::UpdatePacket_Gain() is used for the gain parameter's coefficient packet.</div><div class="section">As a developer, you will choose how this portion of your data model gets handled; you can choose to use the default handler method, which simply forwards the raw parameter values to the algorithm, or you can define a custom handler. You can also choose to bypass the Packet Dispatcher completely (see the <code>DemoDist_GenCoef</code> plug-in for an example of this.)</div><div class="section">Although the handling of DemoGain's gain parameter is trivial, for the sake of demonstration this plug-in uses both Packet Dispatcher approaches in the registration of its bypass and gain parameters.</div><div class="section"></div><h2><a class="anchor" id="subsection__algorithm_add_coefficients_to_the_algorithms_context_structure"></a>
Algorithm: Add coefficients to the algorithm's context structure</h2>
<div class="section"> Your plug-in's context is nothing more than a data structure of pointers that is registered with the host during Describe. These pointers function as <em class="Italic"> ports</em> where host-managed data may be delivered or retrieved.</div><div class="section"></div><h3><a class="anchor" id="subsubsection__context_definition_"></a>
Context definition</h3>
<div class="section"></div><div class="section"> Looking under the "Component context definitions" section within DemoGain_Alg.h, you will find DemoGain's <code>SDemoGain_Alg_Context</code> context. This is DemoGain's context structure, and its sole purpose is to parametrize DemoGain's algorithm with a set of ports. Note the definition of a port for the gain coefficients that are created by <code>DemoGain_Parameters::UpdatePacket_Gain()</code> and another port for the bypass value that is forwarded via the default packet update handler.</div><div class="section"></div><div class="section"><div class="fragment"><div class="line">int32_t               * mCtrlBypassP;</div><div class="line">SDemoGain_CoefsGain   * mCoefsGainP; </div></div><!-- fragment --> <div class="fragmentcaption"> Listing 2: Gain and bypass ports in the DemoGain algorithm's context structure</div></div><div class="section">Once ports have been defined for the algorithm's coefficients and other algorithmic data, unique identifiers for each port in the context must be generated. This is accomplished through use of the <a class="el" href="a00392.html#acf807247ecd6e5899dc9dc31644e9a1d">AAX_FIELD_INDEX</a> macro. The basic idea behind this macro is to generate IDs that the host can use to directly address the ports within their context:</div><div class="section"><div class="fragment"><div class="line">, eAlgPortID_CoefsGainIn = <a class="code" href="a00392.html#acf807247ecd6e5899dc9dc31644e9a1d">AAX_FIELD_INDEX</a> ( SDemoGain_Alg_Context , mCoef ),</div><div class="line">, eAlgFieldID_AudioIn = <a class="code" href="a00392.html#acf807247ecd6e5899dc9dc31644e9a1d">AAX_FIELD_INDEX</a> ( SDemoGain_Alg_Context , mInputPP ) ) </div></div><!-- fragment --> <div class="fragmentcaption"> Listing 3: Some port ID definitions for the DemoGain algorithm's context structure</div></div><div class="section">Now the context's definition is complete. So far these are just fields in a struct; the host doesn't yet know how to route packets from the data model to these ports. That information will come later, in the plug-in's <a class="el" href="a00794.html#subsection__describe_connect_the_parameter_throughout_the_plugin">description</a>. Once this context is described to the host, the host will know to populate it and pass it to the processing function located in DemoGain_AlgProc.cpp.</div><div class="section"></div><h3><a class="anchor" id="subsubsection__algorithm_processing_callback_"></a>
Algorithm processing callback</h3>
<div class="section"></div><div class="section"><div class="fragment"><div class="line"><span class="keywordtype">void</span></div><div class="line"><a class="code" href="a00392.html#aaa22112139aa627574b1ef562f579d43">AAX_CALLBACK</a></div><div class="line">DemoGain_AlgorithmProcessFunction (</div><div class="line">    SDemoGain_Alg_Context * <span class="keyword">const</span> inInstancesBegin [],</div><div class="line">    <span class="keyword">const</span> <span class="keywordtype">void</span> * inInstancesEnd ) </div></div><!-- fragment --> <div class="fragmentcaption"> Listing 4: The DemoGain algorithm's callback prototype</div></div><div class="section">This is where the plug-in's audio buffer processing of the plug-in occurs. Note that this function is passed a pointer to an array of <code>SDemoGain_Alg_Contexts</code>. Each of these represents the state of a particular instance of DemoGain, and contains pointers to the applicable coefficient and audio buffer data.</div><div class="section">Using the <code>SDemoGain_Alg_Context</code> array, instance-specific information and audio buffers are easily retrieved for processing. DemoGain accomplishes this by first iterating over each plug-in instance, then over each channel, and finally over each sample, at which point the gain coefficient is applied to each sample in the input audio buffer and the sample data is copied to the output audio buffer:</div><div class="section"><div class="fragment"><div class="line"><span class="comment">// --------- Iterate over plug -in instances ---------//</span></div><div class="line"><span class="keywordflow">for</span> (SDemoGain_Alg_Context * <span class="keyword">const</span> * walk = inInstancesBegin ; walk &amp;lt;</div><div class="line">    inInstancesEnd ; ++ walk )</div><div class="line">{</div><div class="line">        .</div><div class="line">        .</div><div class="line">        .</div><div class="line">    <span class="comment">// --------- Run processing loop over each input channel ---------//</span></div><div class="line">    <span class="comment">//</span></div><div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ch = 0; ch &amp;lt; kNumChannelsIn ; ch ++)</div><div class="line">    {</div><div class="line">        <span class="comment">// --------- Run processing loop over each sample ---------//</span></div><div class="line">        <span class="comment">//</span></div><div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> t = 0; t &amp;lt; kAudioWindowSize ; t++)</div><div class="line">        {</div><div class="line">                .</div><div class="line">                .</div><div class="line">                .</div><div class="line">        pdO [t] = gain * pdI [t];</div><div class="line">                .</div><div class="line">                .</div><div class="line">                .</div><div class="line">        } <span class="comment">// Go to the next sample</span></div><div class="line">    } <span class="comment">// Go to next channel</span></div><div class="line"> } <span class="comment">// End instance-iteration loop </span></div></div><!-- fragment --> <div class="fragmentcaption"> Listing 5: Iterative loops in the DemoGain algorithm</div></div><div class="section"></div><h2><a class="anchor" id="subsection__describe_connect_the_parameter_throughout_the_plugin"></a>
Describe: Connect the parameter throughout the plug-in</h2>
<div class="section"> As mentioned before, Describe provides a static description of all communication pathways between a plug-in's algorithm, host, and data model. In addition, various effect properties are defined that help the host determine how to handle the plug-in.</div><div class="section">Communication paths between the various plug-in components are described as connections between source and destination ports. In order for these communication paths to be created, the algorithm must first define some destination ports by actually registering its previously defined context fields as communication destinations. DemoGain does this for its gain parameter through the following call to <a class="el" href="a01781.html#a230293b9f6bb413626cd487ca501df75">AAX_IComponentDescriptor::AddDataInPort()</a> in DemoGain_Describe.cpp's <code>DescribeAlgorithmComponent()</code> method:</div><div class="section"><div class="fragment"><div class="line"><a class="code" href="a01781.html">AAX_IComponentDescriptor</a> * compDesc;</div><div class="line">compDesc = outDescriptor-&gt;NewComponentDescriptor ();</div><div class="line">err = compDesc-&gt;<a class="code" href="a01781.html#a230293b9f6bb413626cd487ca501df75">AddDataInPort</a> (</div><div class="line">    eAlgPortID_CoefsGainIn ,</div><div class="line">    <span class="keyword">sizeof</span> (SDemoGain_CoefsGain) ); </div></div><!-- fragment --> <div class="fragmentcaption"> Listing 6: Adding a data port to DemoGain's algorithm component descriptor</div></div><div class="section">This registration process is required for both custom coefficients (Gain) and for data that all plug-ins need such as audio input and output fields.</div><div class="section">That completes the connection, and now the plug-in is fully wired to receive parameter updates, convert raw parameter values to algorithmic coefficients, pack these coefficients into a packet, post the packet to the host for routing, receive the updated packet in the list of context structures that the host provides when calling the algorithm callback, and apply the updated coefficient data in the appropriate context structure to the plug-in's audio data. Whew! </div><h2><a class="anchor" id="subsection__gui_add_a_control"></a>
GUI: Add a control</h2>
<div class="section"> Although the specific steps for adding a GUI control to edit a plug-in parameter will vary depending on the GUI framework you choose, there are a few basic design principles that should always be followed.</div><div class="section">The basic DemoGain plug-in does not include any GUI implementation. For practical GUI implementation examples, open the DemoGain_GUIExtensions sample plug-ins. DemoGain_Cocoa provides an example of a custom plug-in GUI using the native OS X SDK, while DemoGain_Win32 uses native Windows APIs. The other examples in this folder require common third-party libraries.</div><div class="section"></div><h3><a class="anchor" id="subsubsection__control_edits_vs_parameter_updates_"></a>
Control edits vs. parameter updates</h3>
<div class="section"> The most important principle for AAX GUI design is that an edit in a plug-in's GUI should never directly set the state of the associated parameter or parameters. This is because there may be other controller clients of the plug-in's data model which will need to be notified of the edit, or which may need to override edits from the GUI. <ul class="paragraphs">
<li>
<div class="SectionHead"> On control edit</div><p class="endli">When a control is edited in the plug-in GUI, call <a class="el" href="a01669.html#a368b0f5a761d1eda4c41b420f153a077">AAX_IEffectParameters::SetParameterNormalizedValue()</a>. The implementation of this method should post a request to the host in order to trigger the parameter update. The GUI should not update its state until the corresponding parameter update notification is received.  </p>
</li>
<li>
<div class="SectionHead"> On parameter update</div><p class="endli">A parameter update can occur in response to a GUI edit, an edit from another attached controller, an update to a linked parameter, or any other event that affects the state of the data model. When the state of a parameter changes, <a class="el" href="a01665.html#a45b468fef806611581f748af9301ab4d">AAX_IEffectGUI::ParameterUpdated()</a> is called. The plug-in's GUI should be updated in this method in order to reflect the new state of the affected parameter.  </p>
</li>
</ul>
</div><div class="section">For detailed information about the sequence of events and GUI responsibilities during a parameter update, see <a class="el" href="a00820.html">Parameter updates</a></div><div class="section"></div><h3><a class="anchor" id="subsubsection__notifying_the_host_of_gui_events_"></a>
Notifying the host of GUI events</h3>
<div class="section"> Some GUI events must be handled by the host rather than by the plug-in. For example, in Pro Tools a user should be able to display a pop-up menu for controlling automation information by command-option-control-clicking (Mac) or alt-ctl-right clicking (Windows) a control. These events, and other direct communication between the GUI and the "container" in which the host creates the plug-in view, is accomplished via the <a class="el" href="a01889.html">AAX_IViewContainer</a> interface. Be sure to always call the handler methods in this interface before handling a mouse event within the plug-in GUI, in order to maintain the expected host behavior.</div><div class="section"></div><div class="section"> </div><h1><a class="anchor" id="aax_sdk_guide_next_steps"></a>
Next Steps</h1>
<div class="section"> Now that you have a basic understanding of AAX, head back to the <a class="el" href="a00793.html#welcome_basics">front page</a> and continue reading through the suggested documentation. Or dig in to the <a class="el" href="a00848.html">sample plug-ins</a> to see how specific features are supported in AAX.</div><div class="section"> <dl class="section warning"><dt>Warning</dt><dd>Your AAX plug-ins will not be compatible with shipping versions of Pro Tools until they are digitally signed using tools provided by PACE Anti-Piracy, Inc. As an AAX developer you can receive these tools free of charge. Read the <a class="el" href="a00830.html#subsection__digital_signature_">Digital signature</a> section of the <a class="el" href="a00830.html">Pro Tools Guide</a> to learn about the digital signing requirements for compatibility with Pro Tools.</dd></dl>
</div> <div class="dynheader">
Collaboration diagram for Getting Started with AAX:</div>
<div class="dyncontent">
<center><table><tr><td><img src="a00794.png" border="0" alt="" usemap="#a00794"/>
<map name="a00794" id="a00794">
<area shape="rect"  href="a00793.html" title=" " alt="" coords="5,5,132,29"/>
<area shape="rect"  title="A brief introduction to AAX." alt="" coords="180,5,348,29"/>
</map>
</td></tr></table></center>
</div>
</div><!-- contents -->
<!--        Copyright 2016, 2018 by Avid Technology, Inc.        -->
<!-- HTML footer for doxygen 1.8.9.1-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
<div class="FooterLegal">This product may be protected by one or more U.S. and non-U.S. patents. Details are available at <a href="https://www.avid.com/patents">www.avid.com/patents</a>.</div>
Generated on Sun Jun 6 2021 15:21:27 for AAX SDK by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
